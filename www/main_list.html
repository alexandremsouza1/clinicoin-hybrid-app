<ons-page id="mainapp">
    <ons-toolbar>
        <div class="left" style="font-size:larger; font-weight: bold; margin-left:10px;">
            CliniCoin
        </div>
        <div class="right">
            <ons-toolbar-button id="btnSettings">
                <ons-icon icon="fa-cog"></ons-icon>
            </ons-toolbar-button>
        </div>
    </ons-toolbar>
        
    <ons-pull-hook id="pull-hook">
        (Pull To Refresh)
    </ons-pull-hook>
    
    <ons-list id="servicelist">
        <ons-list-item modifier="chevron tappable" tappable v-for="list in msglist">
            <div style="width:90%">
            <div style="float:left; margin-top:5px;" data-bind="text:friendly_name"></div>
            <div class="badge" data-bind="text:list().messages.length"></div>
            </div>
            <div style="font-size:x-small;">Participant</div>
        </ons-list-item>
    </ons-list>
        
    <ons-fab id="btnAddProvider" position="bottom right">
        <ons-icon icon="md-plus"></ons-icon>
    </ons-fab>
    
    <script>
        $(function(){
            bindMainList();

            $('#pull-hook').addEventListener('changestate', function(event) {
                if (event.state === 'action'){
                    channels.checkForMessages();
                }
            });

	        ko.applyBindings(vm);
        });







        /*
        const updateMainVue = function(data) {
        	mainapp.data = data;
        };

        let main_data = channels.getChannels();
        let main_list = [];
        main_data.forEach(obj => {
	        main_list.push(obj.toJSON());
        });
        */

        let ViewModel = function() {
	        const self = this;

	        // 		self.Id = ko.observable(data.Id || 0);
            // self.Questions = ko.observableArray([]);
        };

        const vm = new ViewModel();
    </script>
</ons-page>